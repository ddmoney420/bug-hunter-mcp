---
type: code
status: completed
target_files:
- src/index.test.ts
- package.json
model: claude-haiku-4-5-20251001
---
# Add unit tests for the MCP server tools

## Problem

The bug-hunter-mcp server has no unit tests. The five core tools (`hunt_issues`, `analyze_repo`, `scaffold_solution`, `claim_issue`, `generate_chant_spec`) and their helper functions are untested, making it risky to refactor or extend the codebase.

## Solution

Add a test suite using Vitest with mocked GitHub API calls to test the core helper functions:
- `detectProjectType` - test detection of zig, rust, go, node, python projects
- `extractAcceptanceCriteria` - test parsing checkboxes and numbered lists
- `extractTargetFiles` - test file path extraction from issue bodies
- `generateSkeleton` - test skeleton generation for each project type

## Acceptance Criteria

- [x] Install vitest as a dev dependency
- [x] Add test script to package.json
- [x] Create src/index.test.ts with tests for helper functions
- [x] Test `detectProjectType` returns correct type for each project marker
- [x] Test `extractAcceptanceCriteria` parses checkboxes and numbered lists
- [x] Test `extractTargetFiles` extracts file paths from issue body
- [x] Test `generateSkeleton` generates correct files for each project type
- [x] All tests pass